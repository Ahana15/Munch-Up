<!DOCTYPE html>
<html>
  <head>
    <!--Import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!--Import materialize.css-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />

    <!-- App CSS -->
    <!-- <link rel="stylesheet" href="/css/restaurantMenu.css" type="text/css" /> -->

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- External CSS -->
    <link rel="stylesheet" href="/vendor/normalize-8.0.1.css" type="text/css" />

    <!-- External JS -->
    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <title>Soy Ramentic</title>
  </head>

  <body>
    <% include partials/_homeHeader %>

    <ul class="sidenav" id="mobile-nav">
      <li>
        <a href="#home">Home</a>
      </li>

      <li>
        <a href="#menu">Menu</a>
      </li>
      <li>
        <a href="#order">Order Now</a>
      </li>
    </ul>

    <h2>Unaccepted orders</h2>
    <table>
      <tr>
        <th>Order Number</th>
        <th>Food Item</th>
        <th>Quantity</th>
        <th>Created_At</th>
        <th>Time To Prepare</th>
      </tr>
      <% for (let item of (orders)) { if (item.status === "Not Accepted") { %>
      <tr>
        <td><%= item.user_order %></td>
        <td><%= item.item_name %></td>
        <td><%= item.quantity %></td>
        <td><%= item.created_at %></td>
        <form id="twilio" method="post" action="/restaurantpage">
          <td>
            <input type="text" name="time" value="10" />
            <input type="hidden" name="order_id" value="<%= item.user_order%>" />
            <button type="submit" id="itemsubmission">Submit</button>
          </td>
        </form>
      </tr>
      <% }} %>
    </table>

    <h2>Accepted orders</h2>
    <table>
      <tr>
        <th>Order Number</th>
        <th>Food Item</th>
        <th>Quantity</th>
        <th>Created_At</th>
        <th>Time To Prepare</th>
        <th>Status</th>
      </tr>
      <% for (let item of (orders)) { if (item.status === "Accepted - In Progress") { %>
      <tr>
        <td><%= item.user_order %></td>
        <td><%= item.item_name %></td>
        <td><%= item.quantity %></td>
        <td><%= item.created_at %></td>
        <td></td>
        <td>
            <form id="twiliocomplete" method="post" action="/restaurantpage">
            <input type="hidden" name="completed_order_id" value="<%= item.user_order%>" />
          <button type="submit" id="itemsubmission">Complete</button>
          </form>
        </td>
      </tr>
      <% }} %>
    </table>

    <h2>Completed orders</h2>
    <table>
      <tr>
        <th>Order Number</th>
        <th>Food Item</th>
        <th>Quantity</th>
        <th>Created_At</th>
        <th>Time To Prepare</th>
        <th>Status</th>
      </tr>
      <% for (let item of (orders)) { if (item.status === "Completed") { %>
      <tr>
        <td><%= item.user_order %></td>
        <td><%= item.item_name %></td>
        <td><%= item.quantity %></td>
        <td><%= item.created_at %></td>
      </tr>
      <% }} %>
    </table>
     
  </body>

  <!--JavaScript at end of body for optimized loading-->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script> -->

  <script type="text/javascript" src="/scripts/restauranthistory.js"></script>
</html>
